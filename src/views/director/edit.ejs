<div class="container">    
    <form>
      <h1>Editar Director</h1>
      <div class="row">
        <div class="col-md-6 form-group">
          <label for="nombres">Nombres:</label>
          <input type="text" id="nombres" name="nombres" class="form-control" value="<%= director.nombres %>" required>
        </div>
        <div class="col-md-6 form-group">
          <label for="apellidos">Apellidos:</label>
          <input type="text" id="apellidos" name="apellidos" class="form-control" value="<%= director.apellidos %>" required>
        </div>
      </div>
      <div class="row">
        <div class="col-md-6 form-group">
          <label for="fecha_nacimiento">Fecha de Nacimiento:</label>
          <input type="date" id="fecha_nacimiento" name="fecha_nacimiento" class="form-control" value="<%= director.fecha_nacimiento %>" required>
        </div>
        <div class="col-md-6 form-group">
            <label for="cantidad_peliculas">Cantidad Peliculas:</label>
            <input type="number" id="cantidad_peliculas" name="cantidad_peliculas" class="form-control" value="<%= director.cantidad_peliculas %>" required>
          </div>
      </div>
      <div class="row justify-content-center">
        <div class="col-md-6 text-center">
          <button type="button" id="guardarCambiosBtn" onclick="ActualizarDirector(<%= director.id %>)" class="btn btn-primary">Guardar Cambios</button>
        </div>
      </div>
    </form>
</div>

<style>
  .container {
    margin-top: 2vh;
    width: 60%;
    padding: 20px;
    background-color: #fff;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    border-radius: 8px;
  }
  
  h1 {
    text-align: center;
    color: #333;
    margin-bottom: 20px;
  }
  
  .form-group {
    margin-bottom: 15px;
  }
  
  label {
    display: block;
    margin-bottom: 5px;
    color: #333;
  }
  
  input, select, textarea {
    width: 100%;
    padding: 10px;
    margin-bottom: 10px;
    border: 1px solid #ccc;
    border-radius: 4px;
  }
  
  #btnGuardar {
    margin-top: 20px;
  }
  
  button {
    padding: 10px 20px;
    background-color: #007bff;
    border: none;
    color: white;
    border-radius: 4px;
    cursor: pointer;
  }
  
  button:hover {
    background-color: #0056b3;
  }
</style>

<script>
  async function ActualizarDirector(id) {
    const nombres = document.getElementById('nombres').value;
    const apellidos = document.getElementById('apellidos').value;
    const fecha_nacimiento = document.getElementById('fecha_nacimiento').value;
    const cantidad_peliculas = document.getElementById('cantidad_peliculas').value;

    const requestBody = {
      nombres,
      apellidos,
      fecha_nacimiento,
      cantidad_peliculas
    };

    try {
      const response = await fetch(`/director/${id}`, {
        method: 'PUT',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(requestBody)
      });

      if (!response.ok) {
        throw new Error('Error al actualizar el director');
      }

      console.log('Director actualizado correctamente');
      window.location.href = '/director';

    } catch (error) {
      console.error('Error al actualizar el director:', error);
    }
  }
</script>
